<script type="importmap">
{ "imports": { "playcanvas": "https://cdn.jsdelivr.net/npm/playcanvas@latest/build/playcanvas.mjs" } }
</script>
<script type="module" src="https://cdn.jsdelivr.net/npm/@playcanvas/web-components@latest/dist/pwc.mjs"></script>

<style>
  /* Nuke all default spacing & scroll inside the iframe */
  html, body { margin:0; padding:0; height:100%; overflow:hidden; }
  * { box-sizing: border-box; }

  /* EXACTLY match your Framer layer height here */
  :root { --H: 410px; }

  .pc-wrap {
    position: relative;
    width: 100%;
    height: var(--H);
    overflow: hidden;          /* kill any inner scroll */
  }

  /* Belt-and-suspenders in case of subpixel rounding */
  .pc-wrap,
  pc-app { scrollbar-width: none; }            /* Firefox */
  .pc-wrap::-webkit-scrollbar { width:0; }     /* WebKit */
  pc-app { position:absolute; inset:0; display:block; }
</style>

<div class="pc-wrap">
  <pc-app antialias="false" high-resolution="false">
    <!-- ASSETS -->
    <pc-asset id="plate" src="https://cdn.jsdelivr.net/gh/sashashort/splat-viewer@main/export_ply.sog"></pc-asset>

    <!-- Load the camera controls script (ESM) from the PlayCanvas CDN -->
    <pc-asset id="cameraControls"
              src="https://cdn.jsdelivr.net/npm/playcanvas@latest/scripts/esm/camera-controls.mjs"></pc-asset>

    <pc-scene>
      <!-- CAMERA (interactive) -->
      <!-- Keep your rig; the script will take over orbiting around focusPoint -->
      <pc-entity id="camRig" position="0 0 0" rotation="-28 16 0">
        <pc-entity id="camera" position="0 0 2.3">
          <pc-camera clear-color="#0b0b0b" fov="40"></pc-camera>

          <!-- Attach camera-controls with the same behavior as the example -->
          <pc-scripts>
            <pc-script name="cameraControls" attributes='{
              "enableFly": false,
              "enablePan": false,
              "focusPoint": "vec3:0,0,0",
              "pitchRange": "vec2:-80,-10",
              "sceneSize": 3,
              "zoomRange": "vec2:1.6,3.2"
            }'></pc-script>
          </pc-scripts>
        </pc-entity>
      </pc-entity>

      <!-- SPLAT -->
      <pc-entity id="splat" position="0 0 0" rotation="180 0 0" scale="2.8 2.8 2.8">
        <pc-splat asset="plate"></pc-splat>
      </pc-entity>
    </pc-scene>
  </pc-app>
</div>
